<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#DC2626" />
  <title>GymTracker Pro</title>

  <!-- Favicon -->
  <link
    rel="icon"
    type="image/svg+xml"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='50%' x='50%' text-anchor='middle' font-size='60'>üê¢</text></svg>"
  />

  <!-- Font Awesome for icons -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />

  <!-- Main Stylesheet -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Main App Container -->
  <div id="app">
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
      <div class="loading-content">
        <div class="turtle-loader">üê¢</div>
        <h2>GymTracker Pro</h2>
        <div class="loading-bar">
          <div class="loading-progress"></div>
        </div>
        <p>Getting your gains ready...</p>
      </div>
    </div>

    <!-- Auth Container -->
    <div id="auth-container" class="auth-container" style="display: none;">
      <div class="auth-card">
        <!-- Animated Background Elements -->
        <div class="animated-bg">
          <div class="floating-dumbbell">üèãÔ∏è</div>
          <div class="floating-muscle">üí™</div>
          <div class="floating-fire">üî•</div>
        </div>

        <!-- Logo Section -->
        <div class="auth-logo">
          <div class="logo-mascot">
            <span class="turtle-emoji">üê¢</span>
            <div class="muscle-arms">üí™</div>
          </div>
          <h1 class="app-title">
            <span class="title-gym">GYM</span>
            <span class="title-tracker">TRACKER</span>
            <span class="title-pro">PRO</span>
          </h1>
          <p class="tagline">Slow and Steady Wins the Gains</p>
        </div>

        <!-- Auth Tabs -->
        <div class="auth-tabs">
          <button id="login-tab" class="tab-btn active" onclick="showLogin()">
            <i class="fas fa-sign-in-alt"></i> Login
          </button>
          <button id="signup-tab" class="tab-btn" onclick="showSignup()">
            <i class="fas fa-user-plus"></i> Sign Up
          </button>
        </div>

        <!-- Auth Forms -->
        <div id="auth-form" class="auth-form">
          <!-- Login Form (default) -->
          <div id="login-form" class="form-content">
            <div class="input-group">
              <i class="fas fa-envelope"></i>
              <input type="email" id="login-email" placeholder="Email" required />
            </div>
            <div class="input-group">
              <i class="fas fa-lock"></i>
              <input type="password" id="login-password" placeholder="Password" required />
            </div>
            <button class="auth-btn primary-btn" onclick="handleLogin()">
              <span>Start Training</span>
              <i class="fas fa-arrow-right"></i>
            </button>
            <p class="auth-helper">
              Forgot password? <a href="#" onclick="handleForgotPassword()">Reset it</a>
            </p>
          </div>

          <!-- Signup Form (hidden by default) -->
          <div id="signup-form" class="form-content" style="display: none;">
            <div class="input-group">
              <i class="fas fa-user"></i>
              <input type="text" id="signup-name" placeholder="Your Name" required />
            </div>
            <div class="input-group">
              <i class="fas fa-envelope"></i>
              <input type="email" id="signup-email" placeholder="Email" required />
            </div>
            <div class="input-group">
              <i class="fas fa-lock"></i>
              <input
                type="password"
                id="signup-password"
                placeholder="Password (min 6 characters)"
                required
              />
            </div>
            <button class="auth-btn primary-btn" onclick="handleSignup()">
              <span>Join the Pack</span>
              <i class="fas fa-rocket"></i>
            </button>
            <p class="auth-helper">
              Already crushing it? <a href="#" onclick="showLogin()">Login here</a>
            </p>
          </div>
        </div>

        <!-- Social Login Options -->
        <div class="social-auth">
          <div class="divider"><span>OR</span></div>
          <button class="social-btn google-btn" onclick="handleGoogleLogin()">
            <i class="fab fa-google"></i>
            <span>Continue with Google</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Main Dashboard -->
    <div id="main-dashboard" class="main-dashboard" style="display: none;">
      <!-- Header -->
      <header class="dashboard-header">
        <div class="header-left">
          <div class="logo-small">
            <span class="turtle-small">üê¢</span>
            <span class="brand-name">GymTracker Pro</span>
          </div>
        </div>
        <div class="header-center">
          <h2 id="welcome-message">Welcome back, <span id="user-name">Champion</span>!</h2>
        </div>
        <div class="header-right">
          <button class="notification-btn" onclick="toggleNotifications()">
            <i class="fas fa-bell"></i>
            <span class="notification-badge">3</span>
          </button>
          <button class="profile-btn" onclick="toggleProfile()">
            <i class="fas fa-user-circle"></i>
          </button>
          <button class="logout-btn" onclick="handleLogout()">
            <i class="fas fa-sign-out-alt"></i>
          </button>
        </div>
      </header>

      <!-- Main Selection Screen -->
      <div id="main-selection" class="main-selection">
        <div class="selection-container">
          <h1 class="selection-title">What's the plan today?</h1>

          <div class="selection-cards">
            <!-- Workout Card -->
            <div class="selection-card workout-card" onclick="openWorkoutSection()">
              <div class="card-background"></div>
              <div class="card-content">
                <div class="card-icon"><i class="fas fa-dumbbell"></i></div>
                <h2>WORKOUT</h2>
                <p>Track exercises, PRs, and progress</p>
                <div class="card-stats">
                  <span><i class="fas fa-fire"></i> 7 day streak</span>
                  <span><i class="fas fa-trophy"></i> 3 PRs this week</span>
                </div>
                <button class="card-btn">
                  <span>Let's Train</span>
                  <i class="fas fa-arrow-right"></i>
                </button>
              </div>
            </div>

            <!-- Calorie Tracker Card -->
            <div class="selection-card calorie-card" onclick="openCalorieSection()">
              <div class="card-background"></div>
              <div class="card-content">
                <div class="card-icon"><i class="fas fa-utensils"></i></div>
                <h2>CALORIES</h2>
                <p>Monitor nutrition and diet goals</p>
                <div class="card-stats">
                  <span><i class="fas fa-chart-line"></i> 2,100 today</span>
                  <span><i class="fas fa-bullseye"></i> On target</span>
                </div>
                <button class="card-btn">
                  <span>Track Food</span>
                  <i class="fas fa-arrow-right"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Quick Stats -->
          <div class="quick-stats">
            <div class="stat-card">
              <i class="fas fa-calendar-check"></i>
              <div class="stat-info">
                <span class="stat-value" id="total-workouts">0</span>
                <span class="stat-label">Total Workouts</span>
              </div>
            </div>
            <div class="stat-card">
              <i class="fas fa-weight"></i>
              <div class="stat-info">
                <span class="stat-value" id="total-weight">0 lbs</span>
                <span class="stat-label">Weight Lifted</span>
              </div>
            </div>
            <div class="stat-card">
              <i class="fas fa-medal"></i>
              <div class="stat-info">
                <span class="stat-value" id="total-prs">0</span>
                <span class="stat-label">Personal Records</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Workout Section -->
      <div id="workout-section" class="workout-section" style="display: none;">
        <!-- Workout Header -->
        <div class="workout-header">
          <button class="back-btn" onclick="backToMainSelection()">
            <i class="fas fa-arrow-left"></i>
            <span>Back</span>
          </button>
          <div class="workout-title">
            <h1>WORKOUT ZONE</h1>
            <div class="turtle-mascot"><span class="buff-turtle">üê¢üí™</span></div>
          </div>
          <div class="workout-date"><span id="current-date"></span></div>
        </div>

        <!-- Workout Tabs -->
        <div class="workout-tabs">
          <button class="workout-tab active" onclick="switchWorkoutTab('muscles')" data-tab="muscles">
            <i class="fas fa-body"></i>
            <span>Muscle Map</span>
          </button>
          <button class="workout-tab" onclick="switchWorkoutTab('workout')" data-tab="workout">
            <i class="fas fa-dumbbell"></i>
            <span>Workout</span>
          </button>
          <button class="workout-tab" onclick="switchWorkoutTab('progress')" data-tab="progress">
            <i class="fas fa-chart-line"></i>
            <span>Progress</span>
          </button>
          <button class="workout-tab" onclick="switchWorkoutTab('library')" data-tab="library">
            <i class="fas fa-book"></i>
            <span>Exercise Library</span>
          </button>
        </div>

        <!-- Tab Content -->
        <div class="workout-content">
          <!-- Muscle Map Tab -->
          <div id="muscles-tab" class="tab-content active">
            <div class="muscle-map-container">
              <h2>Weekly Muscle Activity</h2>
              <p class="muscle-map-subtitle">Muscles worked this week (resets Sunday)</p>

              <!-- Body Graph -->
              <div class="body-graph">
                <div class="body-view front-view">
                  <svg viewBox="0 0 200 400" class="body-svg">
                    <g id="front-muscles">
                      <ellipse cx="100" cy="40" rx="25" ry="30" class="muscle-group" data-muscle="neck"></ellipse>
                      <ellipse cx="60" cy="90" rx="20" ry="15" class="muscle-group" data-muscle="front-delts"></ellipse>
                      <ellipse cx="140" cy="90" rx="20" ry="15" class="muscle-group" data-muscle="front-delts"></ellipse>
                      <path d="M 70 100 Q 100 110 130 100 L 120 140 L 80 140 Z" class="muscle-group" data-muscle="chest"></path>
                      <rect x="35" y="100" width="20" height="60" rx="10" class="muscle-group" data-muscle="biceps"></rect>
                      <rect x="145" y="100" width="20" height="60" rx="10" class="muscle-group" data-muscle="biceps"></rect>
                      <rect x="30" y="165" width="20" height="50" rx="10" class="muscle-group" data-muscle="forearms"></rect>
                      <rect x="150" y="165" width="20" height="50" rx="10" class="muscle-group" data-muscle="forearms"></rect>
                      <rect x="85" y="145" width="30" height="60" rx="5" class="muscle-group" data-muscle="abs"></rect>
                      <rect x="75" y="210" width="20" height="80" rx="10" class="muscle-group" data-muscle="quads"></rect>
                      <rect x="105" y="210" width="20" height="80" rx="10" class="muscle-group" data-muscle="quads"></rect>
                      <rect x="75" y="295" width="18" height="60" rx="9" class="muscle-group" data-muscle="calves"></rect>
                      <rect x="107" y="295" width="18" height="60" rx="9" class="muscle-group" data-muscle="calves"></rect>
                    </g>
                  </svg>
                  <p class="view-label">Front</p>
                </div>

                <div class="body-view back-view">
                  <svg viewBox="0 0 200 400" class="body-svg">
                    <g id="back-muscles">
                      <ellipse cx="100" cy="40" rx="25" ry="30" class="muscle-group" data-muscle="traps"></ellipse>
                      <ellipse cx="60" cy="90" rx="20" ry="15" class="muscle-group" data-muscle="rear-delts"></ellipse>
                      <ellipse cx="140" cy="90" rx="20" ry="15" class="muscle-group" data-muscle="rear-delts"></ellipse>
                      <path d="M 70 100 Q 100 105 130 100 L 125 160 L 75 160 Z" class="muscle-group" data-muscle="lats"></path>
                      <rect x="85" y="100" width="30" height="50" rx="5" class="muscle-group" data-muscle="mid-back"></rect>
                      <rect x="35" y="100" width="20" height="60" rx="10" class="muscle-group" data-muscle="triceps"></rect>
                      <rect x="145" y="100" width="20" height="60" rx="10" class="muscle-group" data-muscle="triceps"></rect>
                      <rect x="85" y="165" width="30" height="40" rx="5" class="muscle-group" data-muscle="lower-back"></rect>
                      <ellipse cx="100" cy="220" rx="35" ry="20" class="muscle-group" data-muscle="glutes"></ellipse>
                      <rect x="75" y="240" width="20" height="60" rx="10" class="muscle-group" data-muscle="hamstrings"></rect>
                      <rect x="105" y="240" width="20" height="60" rx="10" class="muscle-group" data-muscle="hamstrings"></rect>
                      <rect x="75" y="305" width="18" height="50" rx="9" class="muscle-group" data-muscle="calves"></rect>
                      <rect x="107" y="305" width="18" height="50" rx="9" class="muscle-group" data-muscle="calves"></rect>
                    </g>
                  </svg>
                  <p class="view-label">Back</p>
                </div>
              </div>

              <!-- Muscle Groups List -->
              <div class="muscle-groups">
                <h3>Muscle Groups Worked</h3>
                <div class="muscle-categories">
                  <!-- Arms -->
                  <div class="muscle-category">
                    <h4><i class="fas fa-hand-rock"></i> Arms</h4>
                    <div class="muscle-list">
                      <div class="muscle-item" data-muscle="biceps">
                        <span class="muscle-indicator"></span>
                        <span>Biceps</span>
                      </div>
                      <div class="muscle-item" data-muscle="triceps">
                        <span class="muscle-indicator"></span>
                        <span>Triceps</span>
                      </div>
                      <div class="muscle-item" data-muscle="forearms">
                        <span class="muscle-indicator"></span>
                        <span>Forearms</span>
                      </div>
                    </div>
                  </div>

                  <!-- Legs -->
                  <div class="muscle-category">
                    <h4><i class="fas fa-running"></i> Legs</h4>
                    <div class="muscle-list">
                      <div class="muscle-item" data-muscle="quads">
                        <span class="muscle-indicator"></span>
                        <span>Quadriceps</span>
                      </div>
                      <div class="muscle-item" data-muscle="hamstrings">
                        <span class="muscle-indicator"></span>
                        <span>Hamstrings</span>
                      </div>
                      <div class="muscle-item" data-muscle="calves">
                        <span class="muscle-indicator"></span>
                        <span>Calves</span>
                      </div>
                      <div class="muscle-item" data-muscle="glutes">
                        <span class="muscle-indicator"></span>
                        <span>Glutes</span>
                      </div>
                    </div>
                  </div>

                  <!-- Shoulders -->
                  <div class="muscle-category">
                    <h4><i class="fas fa-arrows-alt-h"></i> Shoulders</h4>
                    <div class="muscle-list">
                      <div class="muscle-item" data-muscle="front-delts">
                        <span class="muscle-indicator"></span>
                        <span>Front Delts</span>
                      </div>
                      <div class="muscle-item" data-muscle="side-delts">
                        <span class="muscle-indicator"></span>
                        <span>Side Delts</span>
                      </div>
                      <div class="muscle-item" data-muscle="rear-delts">
                        <span class="muscle-indicator"></span>
                        <span>Rear Delts</span>
                      </div>
                    </div>
                  </div>

                  <!-- Chest -->
                  <div class="muscle-category">
                    <h4><i class="fas fa-heart"></i> Chest</h4>
                    <div class="muscle-list">
                      <div class="muscle-item" data-muscle="chest">
                        <span class="muscle-indicator"></span>
                        <span>Pectorals</span>
                      </div>
                    </div>
                  </div>

                  <!-- Back -->
                  <div class="muscle-category">
                    <h4><i class="fas fa-arrow-left"></i> Back</h4>
                    <div class="muscle-list">
                      <div class="muscle-item" data-muscle="lats">
                        <span class="muscle-indicator"></span>
                        <span>Lats</span>
                      </div>
                      <div class="muscle-item" data-muscle="mid-back">
                        <span class="muscle-indicator"></span>
                        <span>Mid Back</span>
                      </div>
                      <div class="muscle-item" data-muscle="lower-back">
                        <span class="muscle-indicator"></span>
                        <span>Lower Back</span>
                      </div>
                      <div class="muscle-item" data-muscle="traps">
                        <span class="muscle-indicator"></span>
                        <span>Traps</span>
                      </div>
                    </div>
                  </div>

                  <!-- Core -->
                  <div class="muscle-category">
                    <h4><i class="fas fa-circle"></i> Core</h4>
                    <div class="muscle-list">
                      <div class="muscle-item" data-muscle="abs">
                        <span class="muscle-indicator"></span>
                        <span>Abs</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Workout Tab -->
          <div id="workout-tab" class="tab-content">
            <div class="workout-container">
              <!-- Workout Controls -->
              <div class="workout-controls">
                <button class="start-workout-btn" onclick="startWorkout()">
                  <i class="fas fa-play"></i>
                  <span>Start New Workout</span>
                </button>
                <button class="routine-btn" onclick="showRoutines()">
                  <i class="fas fa-list"></i>
                  <span>My Routines</span>
                </button>
              </div>

              <!-- Active Workout -->
              <div id="active-workout" class="active-workout" style="display: none;">
                <div class="workout-timer">
                  <i class="fas fa-clock"></i>
                  <span id="workout-timer">00:00:00</span>
                </div>

                <div class="exercises-list" id="exercises-list"></div>

                <div class="workout-actions">
                  <button class="add-exercise-btn" onclick="addExercise()">
                    <i class="fas fa-plus"></i>
                    <span>Add Exercise</span>
                  </button>
                  <button class="finish-workout-btn" onclick="finishWorkout()">
                    <i class="fas fa-check"></i>
                    <span>Finish Workout</span>
                  </button>
                  <button class="cancel-workout-btn" onclick="cancelWorkout()">
                    <i class="fas fa-times"></i>
                    <span>Cancel</span>
                  </button>
                </div>
              </div>

              <!-- Workout History -->
              <div class="workout-history">
                <h3>Recent Workouts</h3>
                <div id="history-list" class="history-list"></div>
              </div>

              <!-- Routines Modal -->
              <div id="routines-modal" class="modal" style="display: none;">
                <div class="modal-content">
                  <div class="modal-header">
                    <h2>My Workout Routines</h2>
                    <button class="close-modal" onclick="closeRoutinesModal()">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                  <div class="modal-body">
                    <button class="create-routine-btn" onclick="createRoutine()">
                      <i class="fas fa-plus"></i>
                      <span>Create New Routine</span>
                    </button>
                    <div id="routines-list" class="routines-list"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Progress Tab -->
          <div id="progress-tab" class="tab-content">
            <div class="progress-container">
              <!-- PRs Section -->
              <div class="prs-section">
                <h3><i class="fas fa-trophy"></i> Personal Records</h3>
                <div id="prs-list" class="prs-list"></div>
                <button class="add-pr-btn" onclick="addPR()">
                  <i class="fas fa-plus"></i>
                  <span>Add PR</span>
                </button>
              </div>

              <!-- Photo Progress -->
              <div class="photo-progress">
                <h3><i class="fas fa-camera"></i> Photo Progress <span class="photo-cap">(20 max photos)</span></h3>

                <!-- Photo grid (JS fills this) -->
                <div class="photo-grid" id="progress-photos"></div>

                <!-- Add Photo button opens a tiny chooser -->
                <div class="photo-actions" style="position: relative; display: inline-block;">
                  <button class="add-photo-btn" type="button" onclick="addProgressPhoto()">
                    <i class="fas fa-camera"></i>
                    <span>Add Photo</span>
                  </button>

                  <!-- Tiny chooser (hidden by default) -->
                  <div id="photo-source-chooser"
                       style="display:none; position:absolute; top:110%; left:0; background:#0b0b0b; border:1px solid rgba(255,255,255,0.15); border-radius:10px; padding:8px; min-width:200px; z-index:9999; box-shadow:0 8px 24px rgba(0,0,0,0.35);">
                    <button type="button"
                            onclick="openCamera()"
                            style="width:100%; padding:10px 12px; background:#111; color:#fff; border:1px solid rgba(255,255,255,0.12); border-radius:8px; margin:2px 0; text-align:left;">
                      üì∑ Take Photo (Camera)
                    </button>
                    <button type="button"
                            onclick="openLibrary()"
                            style="width:100%; padding:10px 12px; background:#111; color:#fff; border:1px solid rgba(255,255,255,0.12); border-radius:8px; margin:2px 0; text-align:left;">
                      üñºÔ∏è Choose from Library
                    </button>
                  </div>
                </div>

                <!-- Hidden file inputs (camera vs library) -->
                <input id="photo-input-camera" type="file" accept="image/*" capture="environment" style="display:none">
                <input id="photo-input-library" type="file" accept="image/*" style="display:none">
              </div>

              <!-- Body Measurements -->
              <div class="measurements-section">
                <h3><i class="fas fa-ruler"></i> Body Measurements</h3>
                <div class="measurements-grid">
                  <div class="measurement-item">
                    <label>Weight</label>
                    <input type="number" id="weight-input" placeholder="lbs" />
                  </div>
                  <div class="measurement-item">
                    <label>Chest</label>
                    <input type="number" id="chest-input" placeholder="inches" />
                  </div>
                  <div class="measurement-item">
                    <label>Waist</label>
                    <input type="number" id="waist-input" placeholder="inches" />
                  </div>
                  <div class="measurement-item">
                    <label>Arms</label>
                    <input type="number" id="arms-input" placeholder="inches" />
                  </div>
                  <div class="measurement-item">
                    <label>Thighs</label>
                    <input type="number" id="thighs-input" placeholder="inches" />
                  </div>
                  <div class="measurement-item">
                    <label>Calves</label>
                    <input type="number" id="calves-input" placeholder="inches" />
                  </div>
                </div>
                <button class="save-measurements-btn" onclick="saveMeasurements()">
                  <i class="fas fa-save"></i>
                  <span>Save Measurements</span>
                </button>
                <div class="measurements-history">
                  <h4>History</h4>
                  <div id="measurements-chart"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Exercise Library Tab -->
          <div id="library-tab" class="tab-content">
            <div class="library-container">
              <h3>Exercise Library</h3>
              <div class="library-search">
                <input type="text" id="exercise-search" placeholder="Search exercises..." />
                <i class="fas fa-search"></i>
              </div>

              <div class="library-filters">
                <button class="filter-btn active" onclick="filterExercises('all')">All</button>
                <button class="filter-btn" onclick="filterExercises('chest')">Chest</button>
                <button class="filter-btn" onclick="filterExercises('back')">Back</button>
                <button class="filter-btn" onclick="filterExercises('shoulders')">Shoulders</button>
                <button class="filter-btn" onclick="filterExercises('arms')">Arms</button>
                <button class="filter-btn" onclick="filterExercises('legs')">Legs</button>
                <button class="filter-btn" onclick="filterExercises('core')">Core</button>
              </div>

              <div class="exercises-grid" id="exercises-grid"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Calorie Section (Placeholder) -->
      <div id="calorie-section" class="calorie-section" style="display: none;">
        <div class="section-header">
          <button class="back-btn" onclick="backToMainSelection()">
            <i class="fas fa-arrow-left"></i>
            <span>Back</span>
          </button>
          <h1>Calorie Tracker</h1>
        </div>
        <div class="coming-soon">
          <i class="fas fa-utensils"></i>
          <h2>Coming Soon!</h2>
          <p>The calorie tracking feature is under development. Check back later!</p>
        </div>
      </div>
    </div>

    <!-- Exercise Modal -->
    <div id="exercise-modal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Add Exercise</h2>
          <button class="close-modal" onclick="closeExerciseModal()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="exercise-form">
            <input type="text" id="exercise-name" placeholder="Exercise name" />
            <div class="sets-container" id="sets-container"></div>
            <button class="add-set-btn" onclick="addSet()">
              <i class="fas fa-plus"></i>
              <span>Add Set</span>
            </button>
            <button class="save-exercise-btn" onclick="saveExercise()">
              <i class="fas fa-check"></i>
              <span>Save Exercise</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript Module -->
  <script type="module" src="app.js"></script>
</body>
</html>
